<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ ¸å¿ƒè¯æ±‡æ™ºèƒ½å¤ä¹  | VocabMaster V5</title>
    <!-- External CSS -->
    <link rel="stylesheet" href="styles/variables.css">
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/layout.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/responsive.css">
</head>
<body>
<header>
    <div class="brand">
        <button class="btn-ghost" onclick="app.toggleFiles()" title="é€‰æ‹©æ–‡ä»¶">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 3h18v18H3z"></path>
                <path d="M9 3v18"></path>
                <path d="M3 9h18"></path>
            </svg>
        </button>
        <span id="currentFileDisplay" class="current-file-display"></span>
    </div>
    <div class="header-controls">
        <div class="toggle-switch">
            <button id="btnModeInput" class="active" onclick="app.setMode('input')">æµè§ˆ</button>
            <button id="btnModeRecall" onclick="app.setMode('recall')">é®æŒ¡</button>
        </div>

        <button id="btnAutoPlay" class="btn-icon-toggle" onclick="app.toggleAutoPlay()" title="è‡ªåŠ¨æ’­æ”¾">
            <svg id="iconAutoPlayOff" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
                <line x1="1" y1="1" x2="23" y2="23"></line>
            </svg>
            <svg id="iconAutoPlayOn" class="hidden" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
        </button>

        <button class="btn-ghost" onclick="app.toggleStats()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="20" x2="18" y2="10"></line>
                <line x1="12" y1="20" x2="12" y2="4"></line>
                <line x1="6" y1="20" x2="6" y2="14"></line>
            </svg>
        </button>
    </div>
</header>
<aside id="filePanel">
    <div class="aside-header">
        <span>é€‰æ‹©æ–‡ä»¶</span>
        <div style="display: flex; gap: 0.5rem;">
            <button class="btn-ghost" onclick="app.refreshFileList()" title="åˆ·æ–°åˆ—è¡¨"
                    style="padding: 0.25rem 0.5rem; font-size: 0.8rem;">
                ğŸ”„
            </button>
            <button class="btn-ghost" onclick="app.toggleFiles()">âœ•</button>
        </div>
    </div>
    <div class="stats-list" id="fileListContainer">
        <div style="padding: 1rem; text-align: center; color: var(--secondary);">
            <div class="spinner" style="margin: 0 auto 1rem;"></div>
            åŠ è½½ä¸­...
        </div>
    </div>
</aside>

<aside id="statsPanel">
    <div class="aside-header">
        <span>å­¦ä¹ åˆ—è¡¨</span>
        <button class="btn-ghost" onclick="app.toggleStats()">âœ•</button>
    </div>
    <div class="stats-list" id="wordListContainer"></div>
    <div style="padding: 1rem; border-top: 1px solid #f1f5f9;">
        <button class="btn-danger" style="width: 100%; justify-content: center;" onclick="app.resetData()">é‡ç½®è¿›åº¦
        </button>
    </div>
</aside>
<main>
    <div id="loader" class="loader">
        <div class="spinner"></div>
        <p>æ­£åœ¨æ·±åº¦è§£æå¥å­ä¸ç”Ÿè¯...</p>
    </div>
    <div class="workspace">
        <article class="card hidden" id="cardContainer">
            <header class="card-header">
                <div class="word-title-group">
                    <span class="main-word" id="displayWord">Loading...</span>
                    <span class="pronunciation" id="displayPronunciation"></span>
                </div>
                <div class="badges" id="displayBadges"></div>
            </header>
            <div class="card-body">
                <ul class="item-list" id="itemList"></ul>
            </div>
            <footer class="card-footer">
                <button class="btn-ghost" onclick="app.prevCard()" id="btnPrev">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                    ä¸Šä¸€ä¸ª
                </button>
                <span class="progress-indicator" id="progressText">0 / 0</span>
                <div class="action-area" id="actionArea"></div>
            </footer>
        </article>
    </div>
</main>
<div id="toast" class="toast">Message</div>

<!-- Confirmation Dialog -->
<div id="confirmDialog" class="dialog-overlay">
    <div class="dialog">
        <div class="dialog-title">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary)" stroke-width="2">
                <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
            <span>åˆ‡æ¢æ–‡ä»¶</span>
        </div>
        <div class="dialog-message" id="dialogMessage"></div>
        <div class="dialog-actions">
            <button class="btn-ghost" onclick="app.confirmDialog.cancel()">å–æ¶ˆ</button>
            <button class="btn-primary" id="dialogConfirmBtn">ç¡®å®š</button>
        </div>
    </div>
</div>
<!-- Load VocabMaster App Module -->
<script type="module">
  import { VocabApp, CONFIG, STATE, GitHubApi, MarkdownParser } from './js/app/vocab-app.js';

  // Export to global scope for backward compatibility with inline event handlers
  window.CONFIG = CONFIG;
  window.STATE = STATE;
  window.GitHubApi = GitHubApi;
  window.MarkdownParser = MarkdownParser;

  // Create and initialize the app
  window.app = new VocabApp();

  // é”®ç›˜å¿«æ·é”®ç›‘å¬
  document.addEventListener('keydown', (e) => {
    // åªåœ¨æµè§ˆæ¨¡å¼ä¸‹å“åº”
    if (window.STATE.mode !== 'input') return;

    switch (e.key) {
      case 'Enter':
      case 'ArrowRight':
        e.preventDefault();
        window.app.nextCard();
        break;
      case 'Backspace':
      case 'ArrowLeft':
        e.preventDefault();
        window.app.prevCard();
        break;
    }
  });
</script>
</html>
